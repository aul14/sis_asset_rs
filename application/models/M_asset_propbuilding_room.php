<?php


defined('BASEPATH') or exit('No direct script access allowed');

use GuzzleHttp\Client;

class M_asset_propbuilding_room extends CI_Model
{
    public function assetPropBuildingRoomById($id_room)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('GET', config_api('url_api') . "/AssetPropbuildingRoom/ByID?idRoom={$id_room}", [
                'headers' => $headers
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }

    public function assetPropBuildingRoomByIsWarehouse($is_Warehouse)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('GET', config_api('url_api') . "/AssetPropbuildingRoom/ByIsWarehouse?isWarehouse={$is_Warehouse}", [
                'headers' => $headers
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }
    public function assetPropBuildingRoomList()
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('GET', config_api('url_api') . "/AssetPropbuildingRoom/List", [
                'headers' => $headers
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }
    public function assetPropBuildingRoomQuery($data)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('POST', config_api('url_api') . "/AssetPropbuildingRoom/Query", [
                'headers' => $headers,
                'json'    => $data
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }

    public function assetPropBuildingRoomInsert($data)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('POST', config_api('url_api') . "/AssetPropbuildingRoom/Insert", [
                'headers' => $headers,
                'json'    => $data
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }

    public function assetPropBuildingRoomUpdate($data)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('POST', config_api('url_api') . "/AssetPropbuildingRoom/Update", [
                'headers' => $headers,
                'json'    => $data
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }

    public function assetPropBuildingRoomDelete($id_room)
    {
        try {

            $client = new Client();

            $headers = [
                'http_errors' => false,
                'Authorization' => config_api('auth_api'),
                "Content-Type" => "application/json",
            ];

            $request = $client->request('POST', config_api('url_api') . "/AssetPropbuildingRoom/Delete?idRoom={$id_room}", [
                'headers' => $headers
            ]);

            $status_code = $request->getStatusCode();

            if ($status_code == 401) {
                return $this->simple_login->status_code($status_code);
            }

            // var_dump($request);
            // die();

            $data = $request->getBody()->getContents();

            $data = json_decode($data, TRUE);

            return $data;
        } catch (\Throwable $th) {
            return $th->getMessage();
        }
    }

    public function data(
        $idBuilding,
        $idFloor,
        $buildingName,
        $floorName,
        $idRoom,
        $roomName,
        $roomCode,
        $roomDesc,
        $bedCount = NULL,
        $roomSpace = NULL,
        $spaceUnit = NULL,
        $roomPower = NULL,
        $powerUnit = NULL,
        $roomPJID = NULL,
        $roomPJName = NULL,
        $workUnit = NULL,
        $isWarehouse
    ) {
        $data = [
            "idBuilding" => (int)$idBuilding,
            "idFloor" => (int)$idFloor,
            "buildingName" => $buildingName,
            "floorName" => $floorName,
            "idRoom" => (int)$idRoom,
            "roomName" => $roomName,
            "roomCode" => $roomCode,
            "roomDesc" => $roomDesc,
            "bedCount" => (int)$bedCount,
            "roomSpace" => (float)$roomSpace,
            "spaceUnit" => $spaceUnit,
            "roomPower" => (float)$roomPower,
            "powerUnit" => $powerUnit,
            "roomPJID" => (int)$roomPJID,
            "roomPJName" => $roomPJName,
            "workUnit" => $workUnit,
            "isWarehouse" => $isWarehouse
        ];

        return $data;
    }
}

/* End of file M_asset_propbuilding_room.php */
